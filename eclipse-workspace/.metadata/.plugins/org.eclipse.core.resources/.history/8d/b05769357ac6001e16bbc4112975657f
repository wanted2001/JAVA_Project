package ezen_messenger;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;

public class AccountManager {
	/* 회원가입 리스트 생성
	 * txt파일로 / 이름은 : memberList
	 * 로그인은 txt를 불러와서 일치 했을때 긍정
	 * 로그인
	 */
	private String addres; 
	private String Password;
	
	public AccountManager() {}
	
	public AccountManager(String addres, String Password) {
		this.addres=addres;
		this.Password=Password;
	}
	
	public void  AccountAddres(Scanner sc) throws IOException, InterruptedException{
		FileWriter fw = new FileWriter("C:\\Messenger\\memberList.txt",true);
		BufferedReader br = new BufferedReader(new FileReader("C:\\Messenger\\memberList.txt"));
		System.out.println("Id를 생성해주세요>");
		String addres = sc.next();
		while (true) {
			String line = br.readLine();
			if (line == null) {
				break;
			}
			if(line.equals(addres)) {
				System.out.println("이미 등록된 아이디입니다.");
				break;
			}else if(!(line.equals(addres))) {
				System.out.println("Password를 생성해주세요>");
				String Password = sc.next();	
				fw.write(addres+Password);
				System.out.println("등록되었습니다.");
			}
		
		String path = "C:\\Messenger"+"\\"+addres;
		File f = new File(path);
		if (!f.exists()) {	// 폴더가 존재하는지 체크, 없다면 생성
			if (f.mkdir()) {
				FileWriter fw1 = new FileWriter(path+"\\friendsList.txt");
				FileWriter fw2 = new FileWriter(path+"\\sendMailBox.txt");
				FileWriter fw3 = new FileWriter(path+"\\receivedMailBox.txt");
				Thread.sleep(500);
				System.out.println("폴더 생성 성공");
				fw1.close();
				fw2.close();
				fw3.close();
			}
			else {
				System.out.println("폴더 생성 실패");
			}
		} else {	// 폴더가 존재한다면
			System.out.println("폴더가 이미 존재합니다.");
        }
		fw.close();
		br.close();
		}
	}
	public String getAddres() {
		return addres;
	}
	public void setAddres(String addres) {
		this.addres = addres;
	}
	public String getPassword() {
		return Password;
	}
	public void setPassword(String password) {
		Password = password;
	}
}